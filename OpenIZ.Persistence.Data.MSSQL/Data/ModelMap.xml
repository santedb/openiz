<?xml version="1.0" encoding="UTF-8" ?>

<modelMap xmlns="http://openiz.org/model/map">

  <!-- Security Users -->
  <class modelClass="OpenIZ.Core.Model.Security.SecurityUser, OpenIZ.Core.Model, Version=1.0.0.0"
		domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityUser, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="UserId"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="Roles" domainName="SecurityUserRoles">
      <via domainName="SecurityRole"/>
    </property>
    <property modelName="PasswordHash" domainName="UserPassword"/>
    <property modelName="UserClass" domainName="UserClass"/>
    <property modelName="SecurityHash" domainName="SecurityStamp"/>
    <property modelName="InvalidLoginAttempts" domainName="FailedLoginAttempts"/>
    <property modelName="LastLoginTime" domainName="LastSuccessfulLogin"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="UpdatedByEntity" keyName="UpdatedBy"/>

  </class>

  <class modelClass="OpenIZ.Core.Model.Security.SecurityRole, OpenIZ.Core.Model, Version=1.0.0.0" domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityRole, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="RoleId"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="Users" domainName="SecurityUserRoles">
      <via domainName="SecurityUser"/>
    </property>

    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Security.SecurityPolicy, OpenIZ.Core.Model, Version=1.0.0.0" domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Policy, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="PolicyId"/>
    <property modelName="Handler" domainName="HandlerClass"/>
    <property modelName="Oid" domainName="PolicyOid"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CanOverride" domainName="CanElevate"/>

    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
  </class>

  <!-- Security Application -->
  <class modelClass="OpenIZ.Core.Model.Security.SecurityApplication, OpenIZ.Core.Model, Version=1.0.0.0"
		domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityApplication, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ApplicationId"/>
    <property modelName="Name" domainName="ApplicationPublicId"/>

    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
  </class>

  <!-- Security Device -->
  <class modelClass="OpenIZ.Core.Model.Security.SecurityDevice, OpenIZ.Core.Model, Version=1.0.0.0"
		domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityDevice, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="DeviceId"/>
    <property modelName="Name" domainName="DevicePublicId"/>

    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Security.SecurityPolicyInstance, OpenIZ.Core.Model, Version=1.0.0.0"
		domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityRolePolicy, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="SecurityPolicyInstanceId"/>
    <property modelName="SourceEntityKey" domainName="RoleId"/>
    <property modelName="PolicyKey" domainName="PolicyId"/>
    <property modelName="SourceEntity" domainName="SecurityRole"/>
    <property modelName="GrantType" domainName="PolicyAction"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Security.SecurityPolicyInstance, OpenIZ.Core.Model, Version=1.0.0.0"
  domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityApplicationPolicy, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="SecurityPolicyInstanceId"/>
    <property modelName="SourceEntityKey" domainName="ApplicationId"/>
    <property modelName="PolicyKey" domainName="PolicyId"/>
    <property modelName="SourceEntity" domainName="SecurityApplication"/>
    <property modelName="GrantType" domainName="PolicyAction"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Security.SecurityPolicyInstance, OpenIZ.Core.Model, Version=1.0.0.0"
  domainClass="OpenIZ.Persistence.Data.MSSQL.Data.SecurityDevicePolicy, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="SecurityPolicyInstanceId"/>
    <property modelName="SourceEntityKey" domainName="DeviceId"/>
    <property modelName="PolicyKey" domainName="PolicyId"/>
    <property modelName="SourceEntity" domainName="SecurityDevice"/>
    <property modelName="GrantType" domainName="PolicyAction"/>
  </class>


  <!-- Concepts -->
  <class modelClass="OpenIZ.Core.Model.DataTypes.ConceptSet, OpenIZ.Core.Model, Version=1.0.0.0"
		domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ConceptSet, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ConceptSetId"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>

    <property modelName="Concepts" domainName="ConceptSetMembers">
      <via domainName="Concept">
        <via domainName="ConceptVersions" aggregate="first" orderBy="VersionSequenceId" sortOrder="desc"/>
      </via>
    </property>

  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.Concept, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ConceptVersion, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">

    <property modelName="Key" domainName="ConceptId"/>
    <property modelName="VersionKey" domainName="ConceptVersionId"/>
    <property modelName="PreviousVersionKey" domainName="ReplacesVersionId"/>
    <property modelName="VersionSequence" domainName="VersionSequenceId"/>
    <property modelName="StatusConceptKey" domainName="StatusConceptId"/>
    <property modelName="StatusConcept" domainName="StatusConcept">
      <via domainName="ConceptVersions" aggregate="first" sortOrder="desc" orderBy="VersionSequenceId"/>
    </property>

    <property modelName="ClassKey" domainName="ConceptClassId"/>
    <property modelName="Class" domainName="ConceptClass" />

    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="IsSystemConcept" domainName="Concept">
      <via domainName="IsSystemConcept"/>
    </property>
    <property modelName="ConceptNames" domainName="Concept">
      <via domainName="ConceptNames"/>
    </property>
    <property modelName="ConceptSets" domainName="Concept" dontLoad="true">
      <via domainName="ConceptSetMembers" >
        <via domainName="ConceptSet"/>
      </via>
    </property>
    <property modelName="VersionSequence" domainName="VersionSequenceId"/>

    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="ConceptClass" keyName="ConceptClassId"/>
    <collapseKey propertyName="StatusConcept" keyName="StatusConceptId"/>

  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.Concept, OpenIZ.Core.Model, Version=1.0.0.0"
     domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Concept, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="ConceptSets" domainName="ConceptSetMembers" dontLoad="true">
      <via domainName="Concept"/>
    </property>
  </class>
  <!-- Concept Class -->
  <class modelClass="OpenIZ.Core.Model.DataTypes.ConceptClass, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ConceptClass, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ConceptClassId"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>

  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.AssigningAuthority, OpenIZ.Core.Model, Version=1.0.0.0" domainClass="OpenIZ.Persistence.Data.MSSQL.Data.AssigningAuthority, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="AssigningAuthorityId"/>
    <collapseKey propertyName="AssigningDevice" keyName="AssigningDeviceId"/>
    <property modelName="DomainName" domainName="HL7CX4"/>
    <property modelName="AssigningDeviceKey" domainName="AssigningDeviceId"/>
    <property modelName="AssigningDevice" domainName="AssigningDevice"/>

    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>

  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.CodeSystem, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.CodeSystem, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="CodeSystemId"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="UpdatedByEntity" keyName="UpdatedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.ConceptRelationshipType, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ConceptRelationshipType, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ConceptRelationshipTypeId"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="UpdatedByEntity" keyName="UpdatedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.PhoneticAlgorithm, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.PhoneticAlgorithm, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="PhoneticAlgorithmId"/>
    <property modelName="Handler" domainName="HandlerClass"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="UpdatedByEntity" keyName="UpdatedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.ReferenceTerm, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ReferenceTerm, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ReferenceTermId"/>
    <property modelName="CodeSystemKey" domainName="CodeSystemId"/>
    <collapseKey propertyName="CodeSystem" keyName="CodeSystemId"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="UpdatedByEntity" keyName="UpdatedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.ReferenceTermName, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ReferenceTermDisplayName, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ReferenceTermDisplayNameId"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="PhoneticAlgorithm" keyName="PhoneticAlgorithmId"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="Name" domainName="DisplayName"/>
    <property modelName="PhoneticAlgorithmKey" domainName="PhoneticAlgorithmId"/>
    <property modelName="PhoneticAlgorithm" domainName="PhoneticAlgorithm"/>
  </class>

  <!-- Concept Names -->
  <class modelClass="OpenIZ.Core.Model.DataTypes.ConceptName, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ConceptName, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ConceptNameId"/>
    <property modelName="SourceEntityKey" domainName="ConceptId"/>
    <property modelName="PhoneticAlgorithmKey" domainName="PhoneticAlgorithmId"/>
    <property modelName="PhoneticAlgorithm" domainName="PhoneticAlgorithm" dontLoad="true"/>
    <property modelName="Language" domainName="LanguageCode"/>
    <collapseKey propertyName="PhoneticAlgorithm" keyName="PhoneticAlgorithmId"/>
  </class>

  <!-- Reference Terms -->
  <class modelClass="OpenIZ.Core.Model.DataTypes.ConceptReferenceTerm, OpenIZ.Core.Model, Version=1.0.0.0" domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ConceptReferenceTerm, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ConceptReferenceTermId"/>
    <property modelName="SourceEntityKey" domainName="ConceptId"/>
    <property modelName="ReferenceTermKey" domainName="ReferenceTermId"/>
    <collapseKey propertyName="ReferenceTerm" keyName="ReferenceTermId"/>
    <collapseKey propertyName="ConceptRelationshipType" keyName="ConceptRelationshipTypeId"/>
    <property modelName="RelationshipTypeKey" domainName="ConceptRelationshipTypeId"/>
  </class>

  <!-- Entity Maps -->
  <class modelClass="OpenIZ.Core.Model.Entities.Entity, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityVersion, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityId"/>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="PreviousVersionKey" domainName="ReplacesVersionId"/>
    <property modelName="VersionSequence" domainName="VersionSequenceId"/>
    <property modelName="StatusConceptKey" domainName="StatusConceptId"/>
    <property modelName="ClassConceptKey" domainName="Entity">
      <via domainName="ClassConceptId"/>
    </property>
    <property modelName="ClassConcept" domainName="Entity" dontLoad="true">
      <via domainName="ClassConcept"/>
    </property>
    <property modelName="DeterminerConceptKey" domainName="Entity">
      <via domainName="DeterminerConceptId"/>
    </property>
    <property modelName="DeterminerConcept" domainName="Entity" dontLoad="true">
      <via domainName="DeterminerConcept"/>
    </property>
    <property modelName="TypeConceptKey" domainName="TypeConceptId"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="Names" domainName="Entity">
      <via domainName="EntityNames"/>
    </property>
    <property modelName="Names" domainName="Entity">
      <via domainName="EntityNames"/>
    </property>
    <property modelName="Addresses" domainName="Entity">
      <via domainName="EntityAddresses"/>
    </property>
    <property modelName="Identifiers" domainName="Entity">
      <via domainName="EntityIdentifiers"/>
    </property>
    <property modelName="Notes" domainName="Entity">
      <via domainName="EntityNotes"/>
    </property>
    <property modelName="Tags" domainName="Entity">
      <via domainName="EntityTags"/>
    </property>
    <property modelName="Telecoms" domainName="Entity">
      <via domainName="EntityTelecomAddresses"/>
    </property>
    <property modelName="Extensions" domainName="Entity">
      <via domainName="EntityExtensions"/>
    </property>
    <property modelName="Relationships" domainName="Entity">
      <via domainName="EntityAssociationsSourceEntityId"/>
    </property>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="TypeConcept" keyName="TypeConceptId"/>
    <collapseKey propertyName="StatusConcept" keyName="StatusConceptId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.Entity, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Entity, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="ClassConceptKey" domainName="ClassConceptId"/>
    <property modelName="ClassConcept" domainName="ClassConcept"/>
    <property modelName="DeterminerConceptKey" domainName="DeterminerConceptId"/>
    <property modelName="Names" domainName="EntityNames"/>
    <property modelName="DeterminerConcept" domainName="DeterminerConcept"/>
    <collapseKey propertyName="ClassConcept" keyName="ClassConceptId"/>
    <collapseKey propertyName="DeterminerConcept" keyName="DeterminerConceptId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.EntityName, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityName, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityNameId"/>
    <property modelName="NameUseKey" domainName="NameUseConceptId"/>
    <property modelName="NameUse" domainName="NameUseConcept"/>
    <collapseKey propertyName="NameUseConcept" keyName="NameUseConceptId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>
    <property modelName="Component" domainName="EntityNameComponents"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.EntityNameComponent, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityNameComponent, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityNameComponentId"/>
    <property modelName="SourceEntityKey" domainName="EntityNameId"/>
    <property modelName="ComponentTypeKey" domainName="ComponentTypeConceptId"/>
    <property modelName="ComponentType" domainName="ComponentTypeConcept"/>
    <collapseKey propertyName="ComponentTypeConcept" keyName="ComponentTypeConceptId"/>
    <property modelName="PhoneticAlgorithmKey" domainName="PhoneticValue">
      <via domainName="PhoneticAlgorithmId"/>
    </property>
    <property modelName="PhoneticAlgorithm" domainName="PhoneticValue">
      <via domainName="PhoneticAlgorithm"/>
    </property>
    <property modelName="Value" domainName="PhoneticValue">
      <via domainName="Value"/>
    </property>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.EntityAddress, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityAddress, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityAddressId"/>
    <property modelName="AddressUseKey" domainName="AddressUseConceptId"/>
    <property modelName="AddressUse" domainName="AddressUseConcept"/>
    <collapseKey propertyName="AddressUseConcept" keyName="AddressUseConceptId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>
    <property modelName="Component" domainName="EntityAddressComponents"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.EntityAddressComponent, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityAddressComponent, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityAddressComponentId"/>
    <property modelName="SourceEntityKey" domainName="EntityAddressId"/>
    <property modelName="ComponentTypeKey" domainName="ComponentTypeConceptId"/>
    <property modelName="ComponentType" domainName="ComponentTypeConcept"/>
    <collapseKey propertyName="ComponentTypeConcept" keyName="ComponentTypeConceptId"/>
    <property modelName="Value" domainName="EntityAddressComponentValue">
      <via domainName="Value"/>
    </property>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.EntityIdentifier, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityIdentifier, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityIdentifierId"/>
    <property modelName="IdentifierTypeKey" domainName="IdentifierTypeId"/>
    <property modelName="IdentifierType" domainName="IdentifierType"/>
    <collapseKey propertyName="IdentifierType" keyName="IdentifierTypeId"/>
    <property modelName="AuthorityKey" domainName="AssigningAuthorityId"/>
    <property modelName="Authority" domainName="AssigningAuthority"/>
    <collapseKey propertyName="AssigningAuthority" keyName="AssigningAuthorityId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>
    <property modelName="Value" domainName="IdentifierValue"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.IdentifierType, OpenIZ.Core.Model, Version=1.0.0.0"
         domainClass="OpenIZ.Persistence.Data.MSSQL.Data.IdentifierType, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="IdentifierTypeId"/>
    <property modelName="TypeConceptKey" domainName="IdentifierTypeConceptId"/>
    <property modelName="TypeConcept" domainName="IdentifierTypeConcept"/>
    <collapseKey propertyName="IdentifierTypeConcept" keyName="IdentifierTypeConceptId"/>
    <property modelName="ScopeConceptKey" domainName="EntityClassScopeConceptId"/>
    <property modelName="Scope" domainName="EntityClassScopeConcept"/>
    <collapseKey propertyName="EntityClassScopeConcept" keyName="EntityClassScopeConceptId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.AssigningAuthority, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.AssigningAuthority, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="AssigningAuthorityId"/>
    <property modelName="DomainName" domainName="HL7CX4"/>
    <property modelName="AssigningDeviceKey" domainName="AssigningDeviceId"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.EntityRelationship, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityAssociation, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityAssociationId"/>
    <property modelName="SourceEntityKey" domainName="SourceEntityId"/>
    <property modelName="TargetEntityKey" domainName="TargetEntityId"/>
    <property modelName="RelationshipTypeKey" domainName="AssociationTypeConceptId"/>
    <property modelName="RelationshipType" domainName="AssociationTypeConcept"/>
    <collapseKey propertyName="AssociationTypeConcept" keyName="AssociationTypeConceptId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.EntityTelecomAddress, OpenIZ.Core.Model, Version=1.0.0.0"
     domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityTelecomAddress, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityTelecomAddressId"/>
    <property modelName="AddressUseKey" domainName="TelecomUseConceptId"/>
    <property modelName="AddressUse" domainName="TelecomUseConcept"/>
    <collapseKey propertyName="TelecomUseConcept" keyName="TelecomUseConceptId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>
    <property modelName="Value" domainName="TelecomAddress"/>
  </class>


  <class modelClass="OpenIZ.Core.Model.DataTypes.EntityExtension, OpenIZ.Core.Model, Version=1.0.0.0"
   domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityExtension, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityExtensionId"/>
    <property modelName="ExtensionTypeKey" domainName="ExtensionTypeId"/>
    <collapseKey propertyName="ExtensionType" keyName="ExtensionTypeId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>

  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.ExtensionType, OpenIZ.Core.Model, Version=1.0.0.0"
   domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ExtensionType, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="ExtensionTypeId"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="UpdatedBy" domainName="UpdatedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <property modelName="UpdatedByKey" domainName="UpdatedBy"/>
    <property modelName="ExtensionHandler" domainName="HandlerClass"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
    <collapseKey propertyName="UpdatedByEntity" keyName="UpdatedBy"/>
    <propertyName modelName="ExtensionHandler" domainName="HandlerClass"/>

  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.EntityNote, OpenIZ.Core.Model, Version=1.0.0.0"
 domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityNote, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityNoteId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>
    <property modelName="AuthorKey" domainName="AuthorEntityId"/>
    <property modelName="Author" domainName="AuthorEntity"/>
    <collapseKey propertyName="AuthorEntity" keyName="AuthorEntityId"/>
    <property modelName="Text" domainName="NoteText"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.DataTypes.EntityTag, OpenIZ.Core.Model, Version=1.0.0.0"
 domainClass="OpenIZ.Persistence.Data.MSSQL.Data.EntityTag, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityTagId"/>
    <property modelName="SourceEntityKey" domainName="EntityId"/>
    <property modelName="TagKey" domainName="Name"/>
    <property modelName="CreatedBy" domainName="CreatedByEntity"/>
    <property modelName="ObsoletedBy" domainName="ObsoletedByEntity"/>
    <property modelName="CreatedByKey" domainName="CreatedBy"/>
    <property modelName="ObsoletedByKey" domainName="ObsoletedBy"/>
    <collapseKey propertyName="CreatedByEntity" keyName="CreatedBy"/>
    <collapseKey propertyName="ObsoletedByEntity" keyName="ObsoletedBy"/>
  </class>

  <!-- Person Maps -->
  <class modelClass="OpenIZ.Core.Model.Entities.Person, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Person, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityVersion">
      <via domainName="EntityId"/>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.PersonLanguageCommunication, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.PersonLanguageCommunication, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="PersonLanguageCommunicationId"/>
    <property modelName="SourceEntityKey" domainName="PersonEntityId"/>
    <property modelName="LanguageCode" domainName="LanguageCommunication"/>
    <property modelName="IsPreferred" domainName="PreferenceIndicator"/>
  </class>

  <!-- Patient Maps -->
  <class modelClass="OpenIZ.Core.Model.Roles.Patient, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Patient, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="Person">
      <via domainName="EntityVersion">
        <via domainName="EntityId"/>
      </via>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="GenderConceptKey" domainName="GenderConceptId"/>
    <collapseKey propertyName="GenderConcept" keyName="GenderConceptId"/>

  </class>

  <!-- Industry Maps -->
  <class modelClass="OpenIZ.Core.Model.Entities.Organization, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Organization, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityVersion">
      <via domainName="EntityId"/>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="IndustryConceptKey" domainName="IndustryConceptId"/>
    <collapseKey propertyName="IndustryConcept" keyName="IndustryConceptId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.Place, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.Place, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityVersion">
      <via domainName="EntityId"/>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="IsMobile" domainName="MobileInd"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.PlaceService, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.PlaceService, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="PlaceServiceId"/>
    <property modelName="SourceEntityKey" domainName="PlaceEntityId"/>
    <property modelName="ServiceConceptKey" domainName="ServiceConceptId"/>
    <collapseKey propertyName="ServiceConcept" keyName="ServiceConceptId"/>
  </class>

  <!-- Security entities -->
  <class modelClass="OpenIZ.Core.Model.Entities.ApplicationEntity, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.ApplicationEntity, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityVersion">
      <via domainName="EntityId"/>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="SecurityApplicationKey" domainName="ApplicationId"/>
    <!--<collapseKey propertyName="SecurityApplication" keyName="ApplicationId"/>-->
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.DeviceEntity, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.DeviceEntity, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="EntityVersion">
      <via domainName="EntityId"/>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="SecurityDeviceKey" domainName="DeviceId"/>
    <collapseKey propertyName="SecurityDevice" keyName="DeviceId"/>
  </class>

  <class modelClass="OpenIZ.Core.Model.Entities.UserEntity, OpenIZ.Core.Model, Version=1.0.0.0"
       domainClass="OpenIZ.Persistence.Data.MSSQL.Data.UserEntity, OpenIZ.Persistence.Data.MSSQL, Version=1.0.0.0">
    <property modelName="Key" domainName="Person">
      <via domainName="EntityVersion">
        <via domainName="EntityId"/>
      </via>
    </property>
    <property modelName="VersionKey" domainName="EntityVersionId"/>
    <property modelName="SecurityUserKey" domainName="UserId"/>
    <collapseKey propertyName="SecurityUser" keyName="UserId"/>

  </class>
</modelMap>